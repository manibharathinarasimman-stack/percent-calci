<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Percent Calculator</title>

<style>
body { margin:0; font-family:Nunito, sans-serif; background:#fff; }

#calcWrapper {
  width:350px; height:350px;
  border:1px solid #ddd; border-radius:14px;
  overflow:hidden; position:relative;
  display:flex; flex-direction:column;
}

#topLogo {
  flex:0 0 auto;
  background:#fff; padding:6px 10px;
  border-bottom:1px solid #eee;
  display:flex; justify-content:flex-start; align-items:center;
}
#topLogo img { height:24px; }

#contentArea {
  flex:1 1 auto;
  overflow-y:auto;
  padding:10px 14px;
}

label { font-weight:700; font-size:13px; }
input, select {
  width:100%; padding:8px;
  border:1px solid #ccc; border-radius:8px;
  margin-top:4px; margin-bottom:10px; font-size:15px;
}
button {
  border:none; border-radius:8px; padding:8px 14px;
  font-weight:700; cursor:pointer;
}
#calcBtn { background:#72337F; color:#fff; }
#resetBtn { background:#eee; }
#answerBox { font-size:24px; font-weight:800; color:#72337F; margin:10px 0; }

#steps { font-size:13px; line-height:1.35; margin-top:10px; }

#visualArea { margin-top:12px; }
canvas { width:100%; height:80px; border-radius:8px; }

#expandBtn {
  position:absolute; right:8px; bottom:8px;
  width:36px; height:36px; border-radius:10px;
  background:#72337F; color:#fff; font-size:20px;
  display:flex; justify-content:center; align-items:center;
  cursor:pointer;
}

/* FULL SCREEN MODE */
.fullscreen {
  position:fixed !important;
  top:0; left:0; right:0; bottom:0;
  width:100vw !important; height:100vh !important;
  border-radius:0 !important;
  z-index:9999 !important;
}

/* NUMERIC KEYBOARD */
#numKeyboard {
  display:none; position:absolute; bottom:0; left:0; right:0;
  background:#fff; border-top:1px solid #ccc;
  padding:6px; z-index:50;
}
#numKeyboard button { width:22%; margin:3px; background:#f5f5f5; }

</style>
</head>
<body>

<div id="calcWrapper">
  <div id="topLogo">
    <img src="https://ik.imagekit.io/brightchamps/website/brightchamps_logo_colour.png">
  </div>

  <div id="contentArea">

    <label>Percentage (P%)</label>
    <input id="pVal" type="text" inputmode="decimal" value="25">

    <label>Number (N)</label>
    <input id="nVal" type="text" inputmode="decimal" value="200">

    <button id="calcBtn">Calculate</button> 
    <button id="resetBtn">Reset</button>

    <div id="answerBox">—</div>

    <div id="steps"></div>

    <div id="visualArea">
      <canvas id="bar"></canvas>
    </div>

  </div>

  <div id="numKeyboard"></div>

  <div id="expandBtn">⛶</div>
</div>

<script>
const p = document.getElementById("pVal"),
      n = document.getElementById("nVal"),
      ans = document.getElementById("answerBox"),
      stepsBox = document.getElementById("steps"),
      canvas = document.getElementById("bar"),
      ctx = canvas.getContext("2d"),
      kb = document.getElementById("numKeyboard"),
      wrapper = document.getElementById("calcWrapper"),
      expand = document.getElementById("expandBtn");

function calc(){
  let P = parseFloat(p.value), N = parseFloat(n.value);
  if(isNaN(P)||isNaN(N)) return;
  let result = (P/100)*N;
  ans.textContent = result;
  stepsBox.innerHTML = `
    <b>Steps:</b><br>
    1) Formula: (P ÷ 100) × N <br>
    2) Substitute: (${P} ÷ 100) × ${N} <br>
    3) Result: ${result}
  `;
  draw(N, result);
}

function draw(total, part){
  let w=canvas.width, h=canvas.height;
  ctx.clearRect(0,0,w,h);
  ctx.fillStyle="#FFEFBF"; ctx.fillRect(0,0,w,h);
  let ratio = part/total; ratio=Math.max(0,Math.min(ratio,1));
  ctx.fillStyle="#72337F"; ctx.fillRect(0,0,w*ratio,h);
}

document.getElementById("calcBtn").onclick = calc;
document.getElementById("resetBtn").onclick = ()=>{p.value=25;n.value=200;ans.textContent="—";stepsBox.textContent="";draw(0,0);};

[p,n].forEach(inp=>{
  inp.addEventListener("focus",()=> showKB(inp));
});

function showKB(field){
  kb.style.display="block";
  kb.innerHTML="";
  ["7","8","9","4","5","6","1","2","3","0",".","←","OK"].forEach(txt=>{
    let b=document.createElement("button");
    b.textContent=txt;
    b.onclick=()=>{
      if(txt==="←") field.value=field.value.slice(0,-1);
      else if(txt==="OK"){ kb.style.display="none"; calc();}
      else field.value+=txt;
    };
    kb.appendChild(b);
  });
}

expand.onclick = ()=>{
  wrapper.classList.toggle("fullscreen");
};
</script>

</body>
</html>
